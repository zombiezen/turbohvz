<?xml version="1.0"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:py="http://genshi.edgewall.org/"
      xmlns:xi="http://www.w3.org/2001/XInclude">

<py:def function="page_title"><span py:replace="user">[user]</span></py:def>
<py:def function="head_info"></py:def>
<py:def function="page_parents">
    <a href="${tg.url('/user/index')}">Users</a>
</py:def>

<py:match path="content">
    <table id="user_info" class="info_table">
        <tbody>
            <tr>
                <th>Joined:</th>
                <td><span class="date" py:content="tg.display_date(user.created)">[date]</span></td>
            </tr>
            <tr py:if="'view-user-email' in tg.identity.permissions">
                <th>Email:</th>
                <td><a href="mailto:${user.email_address}" py:content="user.email_address">[email]</a></td>
            </tr>
        </tbody>
    </table>
    <div py:if="'edit-user' in tg.identity.permissions or tg.identity.user == user">
        <button id="edit_button">Edit</button>
    </div>
    <h2 id="sect_profile">Profile</h2>
    <py:choose>
        <div py:when="user.profile" py:replace="HTML(tg.plain2html(user.profile))">[profile]</div>
        <p py:otherwise="" class="no_profile">This user has not written a profile.</p>
    </py:choose>
    <h2 id="sect_games">Games</h2>
    <div py:replace="tg.display(game_grid, games)">[Games]</div>
    <h2 id="sect_statistics">Statistics</h2>
    <p style="font-style: italic">Coming Soon!</p>
    <script type="text/javascript">
        // EVENTS //
        safe_connect('edit_button', 'onclick',
            function()
            {
                redirect(${tg.jsencode(tg.hvz.user_link(user, 'edit'))});
            });
    </script>
</py:match>

<xi:include href="../master.html" />

</html>
